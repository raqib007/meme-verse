(this.webpackJsonpMemeVerse=this.webpackJsonpMemeVerse||[]).push([[0],{213:function(e,t,n){},214:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},320:function(e,t,n){},396:function(e,t,n){},397:function(e,t,n){},399:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),s=n(25),o=n.n(s),a=(n(262),n(263),n(21)),r=n(409),l=n(414),u=n(257),j=n(402),d=n(403),m=n(412),b=n(26),h=n(416),g=n(407),f=n(413),O=n(59),p=n(418),x=n(419),v=n(4);function y(e){return Object(v.jsxs)("div",{children:[e.errorMsg&&Object(v.jsx)(h.a,{message:e.errorMsg,type:"error",showIcon:!0,style:{marginBottom:20}}),Object(v.jsxs)(g.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(t){e.onSigninClick(t)},children:[Object(v.jsx)(g.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid Email!"},{required:!0,message:"Please input your Email!"}],children:Object(v.jsx)(f.a,{prefix:Object(v.jsx)(p.a,{className:"site-form-item-icon"}),placeholder:"Email"})}),Object(v.jsx)(g.a.Item,{name:"password",rules:[{required:!0,message:"Password is required!"}],children:Object(v.jsx)(f.a,{prefix:Object(v.jsx)(x.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(v.jsxs)(g.a.Item,{children:[Object(v.jsx)("a",{className:"login-form-forgot",href:"/#",children:"Forgot password?"}),Object(v.jsx)("a",{className:"login-form-signup",href:"/#",onClick:function(t){return function(t){t.preventDefault(),e.onAccountClick(!0,"signup","Sign Up")}(t)},children:"Need an account?"})]}),Object(v.jsx)(g.a.Item,{children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",loading:e.isLoading,className:"login-form-button",block:!0,children:"Sign in"})})]})]})}function w(e){return Object(v.jsxs)(v.Fragment,{children:[e.errorMsg&&Object(v.jsx)(h.a,{message:e.errorMsg,type:"error",showIcon:!0,style:{marginBottom:20}}),Object(v.jsxs)(g.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(t){e.onSignupClick(t)},children:[Object(v.jsx)(g.a.Item,{children:Object(v.jsxs)(j.a,{gutter:8,children:[Object(v.jsx)(d.a,{span:12,children:Object(v.jsx)(g.a.Item,{name:"first_name",noStyle:!0,rules:[{required:!0,message:"First Name is required!"}],children:Object(v.jsx)(f.a,{prefix:Object(v.jsx)(p.a,{className:"site-form-item-icon"}),placeholder:"First Name"})})}),Object(v.jsx)(d.a,{span:12,children:Object(v.jsx)(g.a.Item,{name:"last_name",noStyle:!0,rules:[{required:!0,message:"Last Name is required!"}],children:Object(v.jsx)(f.a,{prefix:Object(v.jsx)(p.a,{className:"site-form-item-icon"}),placeholder:"Last Name"})})})]})}),Object(v.jsx)(g.a.Item,{name:"email",rules:[{required:!0,message:"Email is required!"},{type:"email",message:"The input is not valid Email!"}],children:Object(v.jsx)(f.a,{prefix:Object(v.jsx)(p.a,{className:"site-form-item-icon"}),placeholder:"Email"})}),Object(v.jsx)(g.a.Item,{name:"password",rules:[{required:!0,message:"Password is required!"}],children:Object(v.jsx)(f.a,{prefix:Object(v.jsx)(x.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(v.jsx)(g.a.Item,{children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",loading:null===e||void 0===e?void 0:e.isLoading,className:"login-form-button",block:!0,children:"Sign up"})}),Object(v.jsxs)(g.a.Item,{children:[Object(v.jsx)("span",{children:"Have an account? "}),Object(v.jsx)("a",{className:"",href:"/#",onClick:function(t){return function(t){t.preventDefault(),e.onSigninClick(!0,"signin","Sign In")}(t)},children:"Login Here"})]})]})]})}var k=n(32),C=n(406),S=n(408),I=n(115),_=n(420),A=n(421);function N(e){var t=Object(c.useState)(!1),n=Object(a.a)(t,2),i=n[0],s=n[1];return{get:function(t){return s(!0),new Promise((function(n,c){fetch(e+t).then((function(e){return e.json()})).then((function(e){if(!e)return s(!1),c(e);s(!1),n(e)})).catch((function(e){s(!1),c(e)}))}))},post:function(t,n){return s(!0),new Promise((function(c,i){fetch(e+t,{method:"post",headers:{"Content-Type":"application/json","x-access-token":JSON.parse(localStorage.getItem("token"))},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){if(!e)return s(!1),i(e);s(!1),c(e)})).catch((function(e){s(!1),i(e)}))}))},put:function(t,n){return s(!0),new Promise((function(c,i){fetch(e+t,{method:"put",headers:{"Content-Type":"application/json","x-access-token":JSON.parse(localStorage.getItem("token"))},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){if(!e)return s(!1),i(e);s(!1),c(e)})).catch((function(e){s(!1),i(e)}))}))},Delete:function(t){return s(!0),new Promise((function(n,c){fetch(e+t,{method:"delete"}).then((function(e){return e.json()})).then((function(e){if(!e)return s(!1),c(e);s(!1),n(e)})).catch((function(e){s(!1),c(e)}))}))},isLoading:i}}function M(e){var t=Object(c.useState)([]),n=Object(a.a)(t,2),i=n[0],s=n[1],o=N("http://localhost:3000/api/"),r=o.get,l=o.post,j=o.isLoading,d=Object(c.useState)(!1),m=Object(a.a)(d,2),h=m[0],p=m[1],x=Object(c.useState)({}),y=Object(a.a)(x,2),w=y[0],M=y[1],E=Object(b.f)(),T=g.a.useForm(),L=Object(a.a)(T,1)[0];Object(c.useEffect)((function(){r("category").then((function(e){s(e)})).catch((function(e){console.log(e)}))}),[]);var q={name:"file",action:"https://api.Cloudinary.com/v1_1/ddgllfems/image/upload",data:{upload_preset:"czaobowo"},beforeUpload:function(e){var t=!0;return console.log("file.type = ",e.type),"image/png"!==e.type&&"image/jpg"!==e.type&&"image/gif"!==e.type&&"image/jpeg"!==e.type&&(u.b.error("".concat(e.name," is not a png/jpg/gif file")),t=!1),!!t||C.a.LIST_IGNORE},onChange:function(e){"uploading"===e.file.status&&p(!0),"uploading"!==e.file.status&&(console.log(e.file.response),M(Object.assign({},{image_url:e.file.response.secure_url,image_public_id:e.file.response.public_id}))),"done"===e.file.status?(p(!1),u.b.success("".concat(e.file.name," file uploaded successfully"))):"error"===e.file.status&&(p(!1),u.b.error("".concat(e.file.name," file upload failed.")))}};return Object(v.jsxs)("div",{children:[(null===w||void 0===w?void 0:w.image_url)&&Object(v.jsx)(S.a,{width:300,src:null===w||void 0===w?void 0:w.image_url,placeholder:Object(v.jsx)(S.a,{preview:!1,src:"https://gw.alipayobjects.com/zos/rmsportal/rlpTLlbMzTNYuZGGCVYM.png?x-oss-process=image/blur,r_50,s_50/quality,q_1/resize,m_mfit,h_200,w_200",width:300})}),Object(v.jsxs)(g.a,{name:"normal_login",className:"login-form",onFinish:function(t){var n=Object.assign({},t,w,{likes:[],unlikes:[],user_id:e.user});console.log(n),(null===n||void 0===n?void 0:n.image_url)?(console.log(n),l("meme",n).then((function(t){!1!==(null===t||void 0===t?void 0:t.status)&&(M({}),L.resetFields(),e.modalStatus(!1,"",""),E.push("/")),console.log(t)})).catch((function(e){console.log(e)}))):u.b.error("Meme image is required")},form:L,children:[Object(v.jsx)(g.a.Item,{children:Object(v.jsx)(C.a,Object(k.a)(Object(k.a)({},q),{},{multiple:!1,maxCount:1,showUploadList:!1,children:Object(v.jsx)(O.a,{icon:Object(v.jsx)(_.a,{}),loading:h,children:"Click to Upload"})}))}),Object(v.jsx)(g.a.Item,{style:{marginTop:20},name:"description",rules:[{required:!0,message:"Description is required!"}],children:Object(v.jsx)(f.a,{prefix:Object(v.jsx)(A.a,{className:"site-form-item-icon"}),placeholder:"Description"})}),Object(v.jsx)(g.a.Item,{name:"category",rules:[{required:!0,message:"Category is required!"}],children:Object(v.jsx)(I.a,{placeholder:"Select a Category",loading:j,allowClear:!0,children:i.map((function(e){return Object(v.jsx)(I.a.Option,{value:e._id,children:e.name},e._id)}))})}),Object(v.jsx)(g.a.Item,{style:{float:"right"},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",loading:j,className:"login-form-button",children:"Save"})})]})]})}var E=n(415),T=(n(320),n(37)),L=n(116),q=n.n(L),P=n(190),B=n(191);var V=Object(c.createContext)();function F(e){var t=e.children,n=function(){var e=Object(c.useState)((function(){var e=null;return localStorage.getItem("token")&&(e=Object(B.a)(JSON.parse(localStorage.getItem("token")))),e})),t=Object(a.a)(e,2),n=t[0],i=t[1];function s(){return(s=Object(P.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("token")){e.next=3;break}return e.next=3,i(Object(B.a)(JSON.parse(localStorage.getItem("token"))));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=Object(P.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(null);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{user:n,setAuth:function(){return s.apply(this,arguments)},clearAuth:function(){return o.apply(this,arguments)}}}();return Object(v.jsx)(V.Provider,{value:n,children:t})}function U(e){var t=Object(c.useContext)(V),n=l.a.Header;return Object(v.jsx)(n,{style:{position:"fixed",zIndex:1,width:"100%"},children:Object(v.jsxs)("div",{className:"header-content",children:[Object(v.jsx)(T.b,{to:"/",children:Object(v.jsx)("img",{className:"logo",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAA4CAYAAABUv9KRAAAEYUlEQVR4nO2aMZbqMAxF2UlWwjqyiyyCLbCErIA+PTUtbdppU79fRAbxLDsZhhn+Ce+eM8VEtizLsi3b7HZCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBbBsAewJX+2oU6l++UF+JPATDikaFS9kBlv/7SViEWAdCvDVIA57XBL8RbANAgJ0wjAExrygnxViwvrq68QboxvsNWsQCAI4BTWm0AtAAGd+g5A+hMtrctOh2MLgCOFd2p/NnpOyV9rlxn3w9U78rt2Ip6JJ09gKZix8H0+z7d6pg+T5Z2IE83epInu7zvBvaP+fcM4Ez/e9uSXV2grwewL/SztX768TmVym8KGwC/hX6Zw0oMyLfcxDnQX9N1q2OO95xq7ZidESMoqDEPcKk8rJ00kYvpBHJfAS5IMAdyyeabbZj75ol8NJlOnkDMgexjPzLFhWczVJw2IT/9eyLntRW9F8wrSxY0yFfHpXYSY6Cvdza0JJ9w310ebCvYPDhdbOOlIhutHfZfj3nnWSLtHp60CyXbv1z7TdDWgHzyTL8fUW8GeV4I1Fct4J5+cGD09r2j737w2cknxIcy4J5icDsAcDIZD7xviyeDn3APFOz2QcM2+PSHd7mmoO9q36MdY8Q8Fr3VY9s7Z8ue+sI+9ZO6qGeTYF7FmKOTs0POTpYFp33nla6r6EuBwROn1o4PtFLQ8Ep4rdTx+jjYWuQTbnLleXU+VexOKRZPjgl5qhTuIoUxfLDZfW9QSZM2C3J8bsgB6PO2UkBnDsYcYDxIY6WdY6UdnwqUAjoMNMS5ru8T57RDoMtPtmzyIs6VJ5hfA1l0/oh2zivyw3Q4cc2O1Q9Gm4K9RrLa1lcKaKa0xTY/acdkpYDOVvXABiC/geAAGfG9HSdq55bCLfWHbCkdqm/P7cj7PyFOE7NJs1m45yR7RUB7Z4fXfM+0Y7K1Ae0ZMQdL6eqLV7aHHHnB7gdbEFwn1voT2NIhPkNMmCcf99/zBXfl+jGwF0j2TEDzKnXkQQ1seHVAc5qw+kdEQV3PQGWzmxEs5Km1/lTqRNePA/IdZcKnBTDDI0ayZwI6vBFYsOHVAc2H3dU/IkL51gWgYEV+y7K4tdf6s1CP8+rU1887+NXgESPZMwGdvbrh8aB5wBz0w0/aMVkY0CbjFc3X2+P+cpit3Ii3+eypG/G9srf99gq4pj9BmdsrHwqHU8R3/unqsLF6V3zCw8pu9/qANln0YBMdmPY/bKcW0PywAsSHprW3DD2Xs7JRihL1NV1RrglotjHK65PvmkAe2fAZP3VlL5DsqUBz8tLtQjow/VpAm7xFvNoC90PTYReAPKiWfitSellNh9B0M7HktwbzJKnpa4M658BmwB3Ga33YDJiD4vZHspbk/qptT7LSrUGzosxT7ZDujge61MZKv7Rr9Ab1qnXW+i3Qt1g20L/9ABZCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCHEf8k/gnldEKCf2ggAAAAASUVORK5CYII=",alt:""})}),null!==t.user?Object(v.jsxs)("div",{className:"header-button",children:[Object(v.jsx)(E.a,{icon:Object(v.jsx)(p.a,{})})," \xa0\xa0",Object(v.jsx)(O.a,{type:"primary",onClick:function(){return e.showModal(!0,"upload","Create Post")},shape:"round",icon:Object(v.jsx)(_.a,{}),children:"Upload"}),Object(v.jsx)(O.a,{type:"text",onClick:function(){localStorage.getItem("token")&&(localStorage.removeItem("token"),t.clearAuth().then((function(){console.log("signed out")})))},children:"Logout"})]}):Object(v.jsxs)("div",{className:"header-button",children:[Object(v.jsx)(O.a,{type:"text",onClick:function(){return e.showModal(!0,"signin","Sign In")},children:"Login"}),Object(v.jsx)(O.a,{type:"text",onClick:function(){return e.showModal(!0,"signup","Sign Up")},children:"Sign Up"})]})]})})}var D=n(410);n(213);function z(e){return Object(v.jsx)("div",{className:"div-category-list",children:Object(v.jsx)(D.b,{itemLayout:"horizontal",dataSource:e.categories,renderItem:function(e){return Object(v.jsx)(D.b.Item,{children:Object(v.jsx)(D.b.Item.Meta,{avatar:Object(v.jsx)(E.a,{shape:"square",size:"small",src:"https://miscmedia-9gag-fun.9cache.com/images/thumbnail-facebook/1557216707.0007_ESESyM_100x100.jpg"}),title:Object(v.jsx)(T.b,{to:"/meme/".concat(e._id),children:e.name})})})}})})}var Y=n(417),J=n(245),Q=(n(214),n(67)),H=n(422),Z=n(423);function G(e){var t,n,s=e.item,o=Object(c.useContext)(V),r=N("http://localhost:3000/api/").put,l=Object(c.useState)(s),u=Object(a.a)(l,2),j=u[0],d=u[1],m=function(e){var t=e.icon,n=e.text;return Object(v.jsxs)(Y.b,{children:[i.a.createElement(t),n]})},b=function(e){return void 0!=e&&e.filter((function(e){var t;return e==(null===o||void 0===o||null===(t=o.user)||void 0===t?void 0:t.userId)})).length>0};return Object(v.jsxs)("div",{children:[Object(v.jsx)(O.a,{className:b(null===j||void 0===j?void 0:j.likes)?"button-selected":"",onClick:function(){return null!==o.user?function(e){var t="meme/like/".concat(e._id);e.likes.filter((function(e){return e==o.user.userId})).length>0&&(t="meme/removelike/".concat(e._id)),r(t,{}).then((function(e){d(Object(k.a)(Object(k.a)({},j),{},{likes:Object(Q.a)(e.data.likes),unlikes:Object(Q.a)(e.data.unlikes)}))})).catch((function(e){console.log(e)}))}(j):e.singinModal(!0,"signin","Sign In")},children:Object(v.jsx)(m,{icon:H.a,text:null===j||void 0===j||null===(t=j.likes)||void 0===t?void 0:t.length},"list-vertical-like-o")}),",",Object(v.jsx)(O.a,{className:b(null===j||void 0===j?void 0:j.unlikes)?"button-selected":"",onClick:function(){return null!==o.user?function(e){var t="meme/unlike/".concat(e._id);e.unlikes.filter((function(e){return e==o.user.userId})).length>0&&(t="meme/removeunlike/".concat(e._id)),r(t,{}).then((function(e){d(Object(k.a)(Object(k.a)({},j),{},{likes:Object(Q.a)(e.data.likes),unlikes:Object(Q.a)(e.data.unlikes)}))})).catch((function(e){console.log(e)}))}(j):e.singinModal(!0,"signin","Sign In")},children:Object(v.jsx)(m,{icon:Z.a,text:null===j||void 0===j||null===(n=j.unlikes)||void 0===n?void 0:n.length},"list-vertical-like-o")})]})}function K(e){var t=Object(b.f)(),n=Object(b.g)(),s=(Object(c.useContext)(V),Object(c.useState)([])),o=Object(a.a)(s,2),r=o[0],l=o[1],u=N("http://localhost:3000/api/"),j=u.get,d=u.isLoading;Object(c.useEffect)((function(){console.log("inside params"),j("meme/".concat(n.id?n.id:"all")).then((function(e){l(e)})).catch((function(e){console.log(e)}))}),[null===n||void 0===n?void 0:n.id]);var m=function(e){var t=e.icon,n=e.text;return Object(v.jsxs)(Y.b,{children:[i.a.createElement(t),n]})};return Object(v.jsx)(J.a,{spinning:d,children:Object(v.jsx)(D.b,{itemLayout:"vertical",size:"large",dataSource:r,renderItem:function(n){return Object(v.jsx)(D.b.Item,{actions:[Object(v.jsx)(G,{item:n,singinModal:e.onShowModal}),Object(v.jsx)(O.a,{onClick:function(){return t.push("/comments/".concat(n._id))},children:Object(v.jsx)(m,{icon:A.a,text:n.comments.length},"list-vertical-message")})],children:Object(v.jsx)(D.b.Item.Meta,{avatar:Object(v.jsx)(E.a,{style:{backgroundColor:"#00a2ae",verticalAlign:"middle"},size:"large",children:n.user_id.first_name}),title:Object(v.jsxs)(T.b,{to:"/meme_user/".concat(n.user_id._id),children:[n.user_id.first_name," ",n.user_id.last_name]}),description:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{children:n.description}),Object(v.jsx)(T.b,{to:"/details/".concat(n._id),children:Object(v.jsx)(S.a,{src:n.image_url,placeholder:Object(v.jsx)(S.a,{preview:!1,src:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png?x-oss-process=image/blur,r_50,s_50/quality,q_1/resize,m_mfit,h_200,w_200",className:"responsive-img"}),preview:!1})})]})})},n._id)}})})}var R=n(411),W=n(404),X=n(405);function $(e){var t,n,i,s,o=Object(b.g)(),r=Object(c.useContext)(V),l=N("http://localhost:3000/api/"),j=l.get,d=l.post,m=l.put,h=l.isLoading,x=Object(c.useState)({}),y=Object(a.a)(x,2),w=y[0],C=y[1],I=Object(c.useState)(""),_=Object(a.a)(I,2),A=_[0],M=_[1],L=Object(c.useState)(!1),q=Object(a.a)(L,2),P=q[0],B=q[1],F=Object(c.useState)(!1),U=Object(a.a)(F,2),z=U[0],Y=U[1],H=f.a.TextArea;Object(c.useEffect)((function(){B(!0),j("meme/getById/".concat(o.id)).then((function(e){C(e),B(!1)})).catch((function(e){B(!1)}))}),[]);return Object(v.jsx)(J.a,{spinning:h,children:Object(v.jsx)("div",{style:{padding:"10px 24px"},children:Object(v.jsxs)(R.a,{avatar:!0,paragraph:{rows:12},loading:P,active:!0,children:[Object(v.jsxs)("div",{children:[Object(v.jsx)(E.a,{size:"small",shape:"square",icon:Object(v.jsx)(p.a,{})})," ",null===w||void 0===w||null===(t=w.category)||void 0===t?void 0:t.name," - 1h"]}),Object(v.jsx)("h2",{children:null===w||void 0===w?void 0:w.description}),Object(v.jsxs)("p",{children:[null===w||void 0===w||null===(n=w.comments)||void 0===n?void 0:n.length," Comments"]}),Object(v.jsx)("div",{children:!h&&Object(v.jsx)(G,{item:w,singinModal:e.onShowModal})}),Object(v.jsx)("div",{style:{marginTop:10},children:Object(v.jsx)(S.a,{width:"100%",src:w.image_url,placeholder:Object(v.jsx)(S.a,{preview:!1,src:"".concat(w.image_url,"?x-oss-process=image/blur,r_50,s_50/quality,q_1/resize,m_mfit,h_200,w_200"),width:200})})}),Object(v.jsx)(W.a,{}),Object(v.jsx)("div",{children:Object(v.jsx)(X.a,{content:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(g.a.Item,{children:Object(v.jsx)(H,{rows:4,onChange:function(e){M(e.target.value)},value:A})}),Object(v.jsx)(g.a.Item,{children:Object(v.jsx)(O.a,{htmlType:"submit",loading:z,onClick:function(){if(null!==r.user){if(""!=A){Y(!0);var t=Object.assign({},{meme_id:o.id,user_id:r.user.userId,comment:A});d("comment",t).then((function(e){var t=w.comments,n=e.data,c={_id:r.user.userId,first_name:r.user.first_name,last_name:r.user.last_name};Object.assign(n,{user_id:c});var i=[].concat(Object(Q.a)(t),[n]);C(Object(k.a)(Object(k.a)({},w),{},{comments:i})),M(""),Y(!1)})).catch((function(e){console.log(e),Y(!1)}))}}else e.onShowModal(!0,"signin","Sign In")},type:"primary",children:"Add Comment"})})]})})}),Object(v.jsx)(D.b,{dataSource:null===w||void 0===w?void 0:w.comments,header:"".concat(null===(i=w.comments)||void 0===i?void 0:i.length," ").concat((null===w||void 0===w||null===(s=w.comments)||void 0===s||s.length,"comments")),itemLayout:"horizontal",renderItem:function(e){var t,n,c,i;return Object(v.jsx)(D.b.Item,{actions:[Object(v.jsx)("a",{children:"edit"},"list-loadmore-edit"),Object(v.jsx)("a",{onClick:function(t){return function(e,t){e.preventDefault(),console.log(t),m("comment/".concat(t._id),{deleted:!0}).then((function(e){console.log(e),u.b.success("Comment deleted");var n=w.comments.filter((function(e){return e._id!==t._id}));C(Object(k.a)(Object(k.a)({},w),{},{comments:n}))})).catch((function(e){console.log(e)}))}(t,e)},children:"remove"},"list-loadmore-more")],children:Object(v.jsx)(D.b.Item.Meta,{avatar:Object(v.jsx)(E.a,{style:{backgroundColor:"#00a2ae",verticalAlign:"middle"},size:45,children:null===(t=e.user_id)||void 0===t?void 0:t.first_name}),title:Object(v.jsxs)(T.b,{to:"/meme_user/".concat(null===(n=e.user_id)||void 0===n?void 0:n._id),children:[null===(c=e.user_id)||void 0===c?void 0:c.first_name," ",null===(i=e.user_id)||void 0===i?void 0:i.last_name]}),description:e.comment})})}})]})})})}var ee=n(192),te=n.n(ee),ne=(n(396),n(397),r.a.Title),ce=r.a.Text;function ie(e){var t=Object(b.g)().id,n=Object(c.useState)(null),i=Object(a.a)(n,2),s=i[0],o=i[1],r=Object(c.useContext)(V).state,l=Object(c.useState)(!r||!r.following.includes(t)),m=Object(a.a)(l,2),h=m[0],g=m[1],f=N("http://localhost:3000/api/"),p=f.get,x=f.post,y=Object(c.useContext)(V);Object(c.useEffect)((function(){p("users/".concat(t)).then((function(e){null!==y.user&&(e.followers.filter((function(e){return e._id===y.user.userId})).length>0&&g(!1));o(e)})).catch((function(e){console.log(e)}))}),[]);return Object(v.jsx)(v.Fragment,{children:s?Object(v.jsxs)("div",{style:{maxWidth:"550px",margin:"0px auto",border:"0px solid red",padding:"10px 24px"},children:[Object(v.jsxs)(j.a,{gutter:20,children:[Object(v.jsx)(d.a,{span:4,children:Object(v.jsx)(E.a,{style:{backgroundColor:"#00a2ae",verticalAlign:"middle"},size:64,children:s.first_name})}),Object(v.jsx)(d.a,{span:20,children:Object(v.jsxs)(Y.b,{direction:"vertical",children:[Object(v.jsxs)(ne,{level:3,style:{marginBottom:"0"},children:[s.first_name," ",s.last_name]}),Object(v.jsx)(ce,{type:"secondary",children:s.email}),Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"108%"},children:[Object(v.jsxs)("h4",{children:[s.posts.length," posts"]}),Object(v.jsxs)("h4",{children:[s.followers.length," followers"]}),Object(v.jsxs)("h4",{children:[s.following.length," following"]})]}),h?Object(v.jsx)(O.a,{onClick:function(){null!==y.user?x("users/".concat(t,"/follow-user"),{}).then((function(e){e.success?(o((function(e){var t={_id:y.user.userId,email:y.user.email,first_name:y.user.first_name,last_name:y.user.last_name};return Object(k.a)(Object(k.a)({},e),{},{followers:[].concat(Object(Q.a)(e.followers),[t])})})),g(!1)):u.b.warning(e.message)})).catch((function(e){console.log(e),u.b.warning(e)})):e.onShowModal(!0,"signin","Sign In")},children:"Follow"}):Object(v.jsx)(O.a,{onClick:function(){null!==y.user?x("users/".concat(t,"/unfollow-user"),{}).then((function(e){e.success?(o((function(e){var t=e.followers.filter((function(e){return e._id!=y.user.userId}));return Object(k.a)(Object(k.a)({},e),{},{followers:t})})),g(!0)):u.b.warning(e.message)})).catch((function(e){console.log(e),u.b.warn("error",e)})):e.onShowModal(!0,"signin","Sign In")},children:"Unfollow"})]})})]}),Object(v.jsx)(W.a,{}),Object(v.jsx)("div",{className:"gallery",children:s.posts.map((function(e){return Object(v.jsx)(S.a,{src:e.image_url,alt:e.description,placeholder:Object(v.jsx)(S.a,{preview:!1,src:e.image_url,className:"responsive-img"})},e._id)}))})]}):Object(v.jsx)("div",{className:"example",children:Object(v.jsx)(J.a,{})})})}var se=r.a.Title,oe=l.a.Content;function ae(e){var t=Object(c.useContext)(V),n=Object(c.useState)([]),i=Object(a.a)(n,2),s=i[0],o=i[1],r=Object(c.useState)(!1),h=Object(a.a)(r,2),g=h[0],f=h[1],O=Object(c.useState)(""),p=Object(a.a)(O,2),x=p[0],k=p[1],C=Object(c.useState)(""),S=Object(a.a)(C,2),I=S[0],_=S[1],A=Object(c.useState)(""),E=Object(a.a)(A,2),T=E[0],L=E[1],q=N("http://localhost:3000/api/"),P=q.get,B=q.put,F=q.isLoading,D="http://localhost:3000/api/";function Y(e,t,n){f(e),k(t),_(n),L("")}function J(e){fetch("".concat(D,"signin"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(200==e.status)return L(""),e.json();throw u.b.error("Username or password wrong!"),L("Username or password wrong!"),new Error("HTTP status "+e.status)})).then((function(e){localStorage.setItem("token",JSON.stringify(e.token)),t.setAuth().then((function(){Y(!1,"")}))})).catch((function(e){console.log("err",e)}))}function Q(e){console.log(e),fetch("".concat(D,"users"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(200==e.status)return L(""),e.json();throw L(e.message),new Error("HTTP status "+e.status)})).then((function(e){console.log(e),e.success?Y(!0,"signin","Sign In"):(u.b.error(e.message),L(e.message))})).catch((function(e){console.log("err",e)}))}function H(e){var n="meme/like/".concat(e._id);e.likes.filter((function(e){return e==t.user.userId})).length>0&&(n="meme/removelike/".concat(e._id)),B(n,{}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}function Z(e){var n="meme/unlike/".concat(e._id);e.likes.filter((function(e){return e==t.user.userId})).length>0&&(n="meme/removeunlike/".concat(e._id)),B(n,{}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}Object(c.useEffect)((function(){P("category").then((function(e){o(e)})).catch((function(e){console.log(e)}))}),[]);return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(l.a,{className:"layout",style:{height:"100vh"},children:[Object(v.jsx)(U,{showModal:Y}),Object(v.jsx)(oe,{className:"content",children:Object(v.jsxs)(j.a,{children:[Object(v.jsx)(d.a,{span:3,offset:3,className:"div-category",children:Object(v.jsxs)(te.a,{enabled:!0,top:65,bottomBoundary:1200,onStateChange:function(e){e.status===te.a.STATUS_FIXED&&console.log("the component is sticky")},children:[Object(v.jsx)(se,{level:4,style:{paddingLeft:10},children:"All Section"}),Object(v.jsx)(z,{categories:s})]})}),Object(v.jsx)(d.a,{span:12,className:"site-layout-content",children:Object(v.jsxs)(b.c,{children:[Object(v.jsx)(b.a,{path:"/",exact:!0,children:Object(v.jsx)(K,{onUpVoteClick:H,onDownVoteClick:Z,onShowModal:Y})}),Object(v.jsx)(b.a,{path:"/meme/:id",exact:!0,children:Object(v.jsx)(K,{onUpVoteClick:H,onDownVoteClick:Z,onShowModal:Y})}),Object(v.jsx)(b.a,{path:"/details/:id",exact:!0,children:Object(v.jsx)($,{onUpVoteClick:H,onDownVoteClick:Z,onShowModal:Y})}),Object(v.jsx)(b.a,{path:"/comments/:id",exact:!0,children:Object(v.jsx)($,{onUpVoteClick:H,onDownVoteClick:Z,onShowModal:Y})}),Object(v.jsx)(b.a,{path:"/meme_user/:id",exact:!0,children:Object(v.jsx)(ie,{onUpVoteClick:H,onDownVoteClick:Z,onShowModal:Y})}),Object(v.jsx)(b.a,{children:Object(v.jsx)("h1",{style:{textAlign:"center"},children:"404 | Not Found"})})]})})]})}),Object(v.jsx)(m.a,{title:I,centered:!0,visible:g,okButtonProps:{style:{display:"none"}},cancelButtonProps:{style:{display:"none"}},onCancel:function(){return Y(!1,"")},width:"30vw",maskClosable:!1,children:function(){var e;return"signin"===x?e=Object(v.jsx)(y,{onSigninClick:J,onAccountClick:Y,isLoading:F,errorMsg:T}):"signup"===x?e=Object(v.jsx)(w,{onSignupClick:Q,onSigninClick:Y,isLoading:F,errorMsg:T}):"upload"===x&&(e=Object(v.jsx)(M,{modalStatus:Y,user:t.user.userId})),e}()})]})})}var re=function(){return Object(v.jsx)(ae,{})},le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,424)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),c(e),i(e),s(e),o(e)}))};o.a.render(Object(v.jsx)(F,{children:Object(v.jsx)(T.a,{children:Object(v.jsx)(re,{})})}),document.getElementById("root")),le()}},[[399,1,2]]]);
//# sourceMappingURL=main.d3384f9c.chunk.js.map